(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const e of i)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const e={};return i.integrity&&(e.integrity=i.integrity),i.referrerPolicy&&(e.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?e.credentials="include":i.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(i){if(i.ep)return;i.ep=!0;const e=n(i);fetch(i.href,e)}})();class h{constructor(t){this.next=null,this.prev=null,this.firstChild=null,this.lastChild=null,this.parent=null,this.value=t,this.next=null,this.prev=null,this.firstChild=null,this.lastChild=null,this.parent=null}addChild(t){if(t.parent=this,!this.firstChild)this.firstChild=t,this.lastChild=t;else{if(!this.lastChild)throw new Error("Last child must be set.");t.prev=this.lastChild,this.lastChild.next=t,this.lastChild=t}return t}}const c=r=>Array.isArray(r)?r:[r],u=(r,t,n)=>{switch(r){case"view":{const{children:s,...i}=t,e=new h({input:{},...i});if(s)for(const l of c(s))e.addChild(l);return e}default:throw new Error(`${r} is unimplemented`)}},a=(r,t={})=>{const n=r.getContext("2d"),s=t.bgColor??"#000000";return{draw:i=>{n.fillStyle=s,n.fillRect(0,0,r.width,r.height);for(const e of i)if("text"in e.input){n.font=e.input.fontSize+"px sans-serif",n.fillStyle=e.input.color;const l=n.measureText(e.input.text),d=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent;n.fillText(e.input.text,e.x,e.y+d)}else e.backgroundColor!=="transparent"&&(n.fillStyle=e.backgroundColor,n.fillRect(e.x,e.y,e.width,e.height))}}};class f{constructor(){this.start=null,this.end=null,this._size=0}enqueue(t){const n={data:t,next:null,prev:null};this.end?(this.end.next=n,n.prev=this.end):this.start=n,this.end=n,this._size++}dequeue(){const t=this.start;return t===null?null:(t.next?this.start=t.next:(this.start=null,this.end=null),this._size--,t.data)}dequeueFront(){const t=this.end;return t===null?null:(t.prev?this.end=t.prev:(this.start=null,this.end=null),this._size--,t.data)}get size(){return this._size}}const p=r=>({render:t=>{const n=[],s=new f;for(s.enqueue(t);s.size;){const i=s.dequeueFront();if(!i)throw new Error("Node should exist.");n.push(i.value);let e=i.lastChild;for(;e;){if(!("text"in e.value.input)&&e.value.input.display==="none"){e=e.prev;continue}s.enqueue(e),e=e.prev}}n.sort((i,e)=>i.zIndex-e.zIndex),r.draw(n)}}),o=document.createElement("canvas");o.width=window.innerWidth*window.devicePixelRatio;o.height=window.innerHeight*window.devicePixelRatio;o.setAttribute("style","display: block");document.body.appendChild(o);const w=p(a(o));w.render(u("view",{x:70,y:100,width:50,height:50,zIndex:0,backgroundColor:"#ff00ff",children:u("view",{x:100,y:200,width:100,height:100,zIndex:0,backgroundColor:"#00ffff"})}));
