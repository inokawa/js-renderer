(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();class v{constructor(t){if(this._head=null,this._tail=null,this._length=0,t)for(const s of t)this.push(s)}push(t){const s=this._tail;t.prev=s,t.next=null,s&&(s.next=t),this._tail=t,this._head||(this._head=t),this._length++}pop(){const t=this._tail;if(t)return this._tail=t.prev,this.checkHeadAndTail(),this._length--,t}shift(){const t=this._head;if(t)return this._head=t.next,this.checkHeadAndTail(),this._length--,t}checkHeadAndTail(){this._head&&(this._head.prev=null),this._tail&&(this._tail.next=null),this._head||(this._tail=null),this._tail||(this._head=null)}get length(){return this._length}get first(){return this._head}get last(){return this._tail}}class _{constructor(t){this.parent=null,this.prev=null,this.next=null,this.value=t,this.children=new v}get firstChild(){return this.children.first}get lastChild(){return this.children.last}addChild(t){t.parent=this,this.children.push(t)}}const A=i=>Array.isArray(i)?i:[i],m=(i,t,s)=>{switch(i){case"view":{const{children:r,style:e={}}=t,n=new _({style:e});if(r)for(const o of A(r))n.addChild(o);return n}case"text":{const{children:r,style:e={}}=t;return new _({style:e,text:r})}default:throw new Error(`${i} is unimplemented`)}},I=i=>{const t=i.getContext("2d"),s=(r,e)=>{t.font=e;const n=t.measureText(r);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}};return{measureText:s,draw:(r,e,n,o,w)=>{i.width=e*o,i.height=n*o,t.scale(o,o),t.fillStyle=w,t.fillRect(0,0,i.width,i.height);for(const l of r)if("text"in l){const h=l.fontSize+"px sans-serif",{height:c}=s(l.text,h);t.font=h,t.fillStyle=l.color,t.fillText(l.text,l.x,l.y+c)}else l.backgroundColor!=="transparent"&&(t.fillStyle=l.backgroundColor,t.fillRect(l.x,l.y,l.width,l.height))}}};function y(i,t){if(!i)throw new Error(t)}class L{constructor(){this.list=new v}push(t){this.list.push({value:t,next:null,prev:null})}pop(){return this.list.pop()?.value}shift(){return this.list.shift()?.value}get length(){return this.list.length}}const S=i=>{let t=!1,s,r,e,n;const o="#000000",w=h=>{y(r!=null,"width is not initialized"),y(e!=null,"height is not initialized"),y(n!=null,"dpr is not initialized");const c=[],f=new L;f.push(h);let x;for(;x=f.shift();){const p=x.value;if("text"in p){const{text:u,style:a}=p;c.push({x:a.left??0,y:a.top??0,width:a.width??0,height:a.height??0,zIndex:a.zIndex??0,text:u,fontSize:a.fontSize??14,color:a.color??"#fff"})}else{const{style:u}=p;c.push({x:u.left??0,y:u.top??0,width:u.width??0,height:u.height??0,zIndex:u.zIndex??0,backgroundColor:u.backgroundColor??"transparent"})}let d=x.lastChild;for(;d;){if(d.value.style.display==="none"){d=d.prev;continue}f.push(d),d=d.prev}}c.sort((p,d)=>p.zIndex-d.zIndex),i.draw(c,r,e,n,o)},l=()=>{requestAnimationFrame(()=>{const h=s;s=void 0,!(t||!h)&&w(h)})};return{size:(h,c,f)=>{r=h,e=c,n=f},render:h=>{s=h,l()},dispose:()=>{t=!0}}};window.addEventListener("error",i=>{alert(i.message)});const g=document.createElement("canvas");g.setAttribute("style","display: block");const z=S(I(g)),C=()=>{const i=window.devicePixelRatio,t=window.innerWidth,s=window.innerHeight;g.style.width=t+"px",g.style.height=s+"px",z.size(t,s,i)};C();document.body.appendChild(g);const b=()=>{z.render(m("view",{style:{left:70,top:100,width:50,height:50,zIndex:0,backgroundColor:"#ff00ff"},children:m("view",{style:{left:100,top:200,width:100,height:100,zIndex:0,backgroundColor:"#00ffff"}})}))};b();window.addEventListener("resize",()=>{C(),b()});
